extends shared/_layout

block pageTitle
  include shared/_variable
  include shared/_mixin
  title 自动加载#{titleSuffix}

block pageHeader
  h1 自动加载
  p ndoojs支持自动加载模块，默认使用Do.js加载模块(Do.js经过修改)。

block pageContent
  h3 1. 引入do.js以及模块定义文件
  +renderCode('html')
    ='<script src="../lib/Do.js"></script>'

  h3 2. 添加模块定义
  p
    |此处用到了事件系统，参见
    a(href="ref.event.html") event
    |。
  +renderCode('javascript')
    ="(function(_n){\n"
    ="  Do.define('home', {\n"
    ="    path: 'example2.js',\n"
    ="    type: 'js'\n"
    ="  });\n"
    ="  _n.on('NAPP_DEFINE', function(){\n"
    ="    _n.setApp('home');\n"
    ="  });\n"
    ="})(this.N = this.ndoo || (this.ndoo = {}));"
  h5 完整代码如下：
  p html
  +renderCode('html')
    ='<!DOCTYPE html>\n'
    ='<html>\n'
    ='  <head>\n'
    ='    <meta charset="UTF-8">\n'
    ='    <title>example</title>\n'
    ='    <script src="../js/ndoo_prep.js"></script>\n'
    ='  </head>\n'
    ='  <body>\n'
    ='    <p id="content"></p>\n'
    ='    <div id="scriptArea" data-page-id="home/index">\n'
    ='      <script src="../lib/underscore-min.js"></script>\n'
    ='      <script src="../lib/jquery-2.1.1.min.js"></script>\n'
    ='      <script src="../lib/Do.js"></script>\n'
    ='      <script src="../js/ndoo_lib.js"></script>\n'
    ='      <script src="../js/ndoo.js"></script>\n'
    ="      <script>\n"
    ="        (function(_n){\n"
    ="          Do.define('home', {\n"
    ="            path: 'js/example1.js',\n"
    ="            type: 'js'\n"
    ="          });\n"
    ="          _n.on('NAPP_DEFINE', function(){\n"
    ="            _n.setApp('home');\n"
    ="          });\n"
    ="        })(this.N = this.ndoo || (this.ndoo = {}));\n"
    ='      </script>\n'
    ='    </div>\n'
    ='  </body>\n'
    ='</html>'
  p.notice
    |示例中定义了home模块的文件js/example1.js，但未载入该文件。当前页面的模块属于home模块，执行action时会自动加载home模块。
    span
      |查看
      a(href="../example/example2.html") example2.html
